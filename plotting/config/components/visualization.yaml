# src/ui/config/visualization.yaml - Visualization settings

# NEW: Choose the plotting library
plotting_backend: "ggplotly" # Options: "ggplot", "plotly", "ggplotly" - Using ggplot2 + plotly for consistent facet layouts

# NEW: Specify the path to the Rdata file containing the data manager object
# If null or file not found, will use get.default.data.manager()
data_manager_path: "external/jheem_analyses/cached/ryan.white.web.data.manager.rdata"

# Style manager configuration - controls colors, line types, etc.
style_manager:
  # General style parameters that affect all plots
  general:
    linewidth.slope: 0  # Set line width of slope lines to 0
    alpha.ribbon: 0.2   # Transparency for uncertainty ribbons
  # Styles for baseline vs. intervention comparison
  baseline:
    color: "#0072B2"  # Blue
    alpha: 0.9
  intervention:
    color: "#D55E00"  # Orange (more prominent)
    alpha: 1.0
  # Set to true if you want different line types in addition to colors
  use_different_line_types: false

# Plot appearance customizations - applies to all plots
plot_customizations:
  # Base theme for the plot
  theme_name: "minimal"
  
  # Theme customizations
  theme:
    background_color: "#FFFFFF"
    grid_color: "#E5E5E5"
    text_size: 12
    legend_position: "bottom" # Default for ggplot; may be overridden by backend (e.g., ggplotly in plot_panel.R)
    legend_direction: "horizontal"
  
  # Axis formatting
  axes:
    x_title: "Year"
    y_title: null  # Uses default from plot
    x_format: null  # No special formatting for years
  
  # Facet customization
  facets:
    strip_background: "#F0F0F0"
    strip_text_size: 8 # Further reduced size to help with potential clipping

# Baseline simulations configuration
baseline_simulations:
  enabled: true
  # Global settings that apply to both prerun and custom
  default_file_pattern: "base/{location}_base.Rdata"
  
  # Labels for baseline and intervention simulations
  # Labels support template tags like {location} which will be replaced with actual values
  default_label: "Baseline (No Intervention)"
  intervention_label: "Intervention ({location})"
  
  # Page-specific settings
  prerun:
    enabled: true
    # Use provider from page config
    use_provider: true
    # Specify the baseline file pattern (uses default if not specified)
    # file_pattern: "alternate/path/{location}_baseline.Rdata"  # Uncomment to override
    
  custom:
    enabled: true
    # For custom, we can choose to reuse the base simulation
    reuse_base_simset: true
    # Or load a different one if reuse_base_simset is false
    # file_pattern: "special/baseline/{location}.Rdata"  # Uncomment to override

# Faceted plot configuration
faceted_plots:
  min_facet_width: 350   # Minimum width per facet in pixels
  min_facet_height: 250  # Minimum height per facet in pixels
  max_columns: 2         # Maximum number of columns for faceted plots

# Facet label mappings - translates internal codes to display labels
facet_labels:
  age:
    "13-24 years": "13-24 years"
    "25-34 years": "25-34 years"
    "35-44 years": "35-44 years"
    "45-54 years": "45-54 years"
    "55+ years": "55+ years"
  race:
    "black": "Black"
    "hispanic": "Hispanic"
    "other": "Other"
  sex:
    "heterosexual_male": "Heterosexual male"
    "msm": "MSM"
    "female": "Female"
  risk:
    "never_IDU": "Never PWID"
    "active_IDU": "Active PWID"
    "IDU_in_remission": "PWID in remission"
    "heterosexual": "Heterosexual"
    "idu": "PWID"
    "msm": "MSM"
    "msm_idu": "MSM/PWID"
